dist: xenial
language: python
python:
  - 3.7.4
before_install:
  - git clone 'https://github.com/cjlin1/libsvm.git' /opt/libsvm
  - make -C /opt/libsvm
  - make -C /opt/libsvm/python
  - sudo apt-get update -y
  - sudo apt-get install -y libglib2.0-0 libsm6 libfontconfig1 libxrender1
env:
  - PYTHONPATH=${PYTHONPATH}:/opt/libsvm/python
install:
  - pip install -e .[dev]
script:
  - pytest
deploy:
  provider: pypi
  user: ocampor
  on:
    branch: master
  password:
    secure: n45ohGiCcvrDbwwMmHMwu5nmZ8YGShjJhtLkYMXR5uxh3CO95qoQjLVCEqcvHd2O5Q2blyNONpoxyZOQCTIsK7qdt7wfJdrvOyfyqRAXRrhRw4rf3ueOlYp/SO7uvwWIYexhmkhPH2behdhXAtQ1ab8rfN3NzbEF19Pnr71ta0Z+mvwFYjDfJHhe5pOUG8QEm5IDyAVPkjXJ+OpEEpFV/MunOqlPSQtA85cniElvcKifKC8X+j4YmW7NtJHn9XYzGt1L5mUW5vKjJ21RIg8ClZlQdZO7TLlwJ6X+Ej+pQBxxhpTj5h0eJZ0cA4oQHDGxZrEaXhK2RUUaU9juXCExmUnABc8JotclfPZ4HBRVzu+aoZk7QTvEnwwjZqDOjmXUrrBqDxB/K8NCy0OrD/53m8LAphMfvtVp+XFJSE1Y4WnjJ82MkQMqbyGvs8WvinK8RIFy2Faa3p1xsog8JzBwRw7aE7F1HKpApDMv8AxTnhBnhq6P6vv4fcuikWSX6O4J4aKc9VzbHrgnVvSM/2Xn7ot+28OLC1ZG9Ixj5ifrqGI/bGpxoaUvJGTeDaXthO/9jb5np5T6fyDj6eA5I2GWYkQ2hIYsImhkJ2DnF10vNBiH7BzkrIiqRszDfvRmTWWPZQAl38d6/SGAwpIECf0GI1cRmyQfHn8+d/tZlU4ZNeU=
